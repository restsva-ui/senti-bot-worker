/**
 * aiText ‚Äî –±–∞–∑–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç.
 * –¢—É—Ç –º–æ–∂–Ω–∞ –ø—ñ–¥‚Äô—î–¥–Ω–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π LLM. –ü–æ–∫–∏ ‚Äî –±–µ–∑–ø–µ—á–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞.
 */
export async function aiText(env, prompt, opts = {}) {
  // TODO: –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –≤–∏–∫–ª–∏–∫ LLM (Gemini/DeepSeek/‚Ä¶)
  // –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —î OPENROUTER_API_KEY ‚Äî –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ fetch(...)
  const trimmed = String(prompt ?? "").slice(0, 4000);
  return `ü§ñ –í—ñ–¥–ø–æ–≤—ñ–¥—å: ${trimmed ? "—è –ø–æ—á—É–≤: " + trimmed : "–Ω–∞–¥—ñ–π—à–ª–∏, –±—É–¥—å –ª–∞—Å–∫–∞, —Ç–µ–∫—Å—Ç"}.`;
}

/**
 * aiVision ‚Äî ¬´–æ–ø–∏—Å/–∞–Ω–∞–ª—ñ–∑¬ª –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–±–æ —Ñ–∞–π–ª—É –∑–∞ URL.
 * –ü–æ–∫–∏ ‚Äî –∑–∞–≥–ª—É—à–∫–∞, —è–∫–∞ —Ñ–æ—Ä–º—É—î –¥—Ä—É–∂–Ω—é –≤—ñ–¥–ø–æ–≤—ñ–¥—å.
 */
export async function aiVision(env, url, prompt = "") {
  const p = String(prompt ?? "").slice(0, 500);
  const shortUrl = String(url ?? "").slice(0, 120);
  // TODO: –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –≤–∏–∫–ª–∏–∫ vision-–º–æ–¥–µ–ª—ñ (Gemini Vision/Claude Vision/‚Ä¶)
  return [
    "üñºÔ∏è –Ø –æ—Ç—Ä–∏–º–∞–≤ —Ñ–∞–π–ª/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.",
    shortUrl ? `URL: ${shortUrl}` : null,
    p ? `–ó–∞–ø–∏—Ç: ${p}` : null,
    "",
    "–ü–æ–∫–∏ —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é –±–∞–∑–æ–≤–æ. –•–æ—á–µ—à ‚Äî –ø—ñ–¥‚Äô—î–¥–Ω–∞—é ¬´—Å–ø—Ä–∞–≤–∂–Ω—ñ–π¬ª vision —ñ –∑—Ä–æ–±–ª—é –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å.",
  ]
    .filter(Boolean)
    .join("\n");
}