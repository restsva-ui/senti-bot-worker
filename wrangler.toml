# wrangler.toml — Senti Bot Worker
name = "senti-bot-worker"
main = "src/index.js"
compatibility_date = "2024-08-20"
node_compat = true
workers_dev = true

# ---------- KV namespaces ----------
# ⚠️ Підстав свої ID з Cloudflare Dashboard (Workers → KV → Namespace → "View bindings/ID").

[[kv_namespaces]]
binding = "DEDUP_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "OAUTH_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "STATE_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "TODO_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "USER_OAUTH_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "CHECKLIST_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "LIKES_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "ENERGY_LOG_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

[[kv_namespaces]]
binding = "DIALOG_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"        # <-- твій ID

# ✅ НОВЕ: черга матеріалів для самонавчання
[[kv_namespaces]]
binding = "LEARN_QUEUE_KV"
id = "86a54c59ce674a558780c58bf1a47dfd"        # <-- твій новий ID (знімок екрана)

# ---------- Environment variables ----------
[vars]
# Telegram
BOT_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"
TELEGRAM_ADMIN_ID = "784869835"
WEBHOOK_SECRET = "****"

# Локаль/час
TIMEZONE = "Europe/Kyiv"

# Діагностика/маршрутизація моделей
DIAG_TAGS = "on"
MODEL_ORDER = "gemini:gemini-2.5-flash, cf:@cf/meta/llama-3.1-8b-instruct, free:meta-llama/llama-4-scout:free"
GEMINI_MODEL = "gemini-2.5-flash"
CF_MODEL = "@cf/meta/llama-3.1-8b-instruct"
FREE_API_BASE_URL = "https://openrouter.ai/api"
FREE_API_MODEL = "meta-llama/llama-4-scout:free"
FREE_API_PATH = "/v1/chat/completions"

# Самоудосконалення/нічні задачі
AUTO_IMPROVE = "on"
NIGHTLY_UTC_HOUR = "23"          # коли запускати нічного агента (UTC)
SELF_REGULATE = "on"
SELF_TUNING_FACTOR = "0.3"

# Енергія
ENERGY_MAX = "100"
ENERGY_RECOVER_PER_MIN = "1"
ENERGY_COST_TEXT = "1"
ENERGY_COST_IMAGE = "5"
ENERGY_LOW_THRESHOLD = "10"

# Cloudflare AI (якщо використовуєш)
CF_ACCOUNT_ID = "YOUR_CF_ACCOUNT_ID"
CLOUDFLARE_API_TOKEN = "YOUR_CF_AI_TOKEN"

# ---------- Triggers (нічний агент) ----------
[triggers]
crons = ["0 23 * * *"]  # кожного дня о 23:00 UTC

# ---------- Dev/Prod секції (за бажанням) ----------
# [env.dev.vars]
# [env.production.vars]
# Можеш дублювати змінні, якщо треба різні значення для середовищ.